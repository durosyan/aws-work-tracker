## 2025-07-20 15:58 - Project Setup and Infrastructure Decisions

For the most part this project is going okay, I'm working on the infrastructure scaffolding so I'm happy with that, I've got the CI/CD started too, so thats a good thing.

This is a chat summary from when I was planning this initially:

---

**üõ†Ô∏è AWS Work Tracker Project ‚Äì Planning Session Summary**

- Defined a serverless work-tracking app to log Clock In/Out and break events, tailored to unpredictable schedules.
- Outlined architecture using React frontend (hosted on S3), API Gateway, Lambda, and DynamoDB with access-pattern-first schema.
- Designed repo structure with separate folders for frontend, Terraform, and Lambda handlers‚Äîemphasizing clean modularity.
- Created a Mermaid diagram and drafted detailed architecture docs to describe system flow.
- Explored UI logic for multi-user PIN login, button enablement based on session state, and backend validation using DynamoDB.
- Finalized a development roadmap from repo scaffold to MVP delivery, including Terraform setup, API logic, and frontend integration.

---

I'm unsure if this really counts as me doing this, however I am reading what it generates, and I am doing minor edits and making architectural decisions based on the answers it gives me.

[techworld with nana](https://www.youtube.com/watch?v=Nn08HVq4BHA) gives a good outline of how AI is being adopted and personally I think it is getting really good at coding tbh, no reason not to use it imo.

She outlines four skills that are important:

1. Evolving into an architectural role
2. Mastering devops and cloud native skills
3. Creating measurable business impact
4. Leveraging AI tools for productivity

I agree with this mostly, although I do think it's of utmost importance right now to be essentially taking on the role of a senior engineer, treating AI changes as not entirely trustworthy until they've been thoroughly tested.

So with this project, this is the chat summary:

---

### Summary of Chat So Far

1. **Initial Requirements and Terraform Structure**
   - The project requires an AWS account, a Route53 hosted zone, an S3 bucket for Terraform state, and a DynamoDB table for state locking.
   - The infrastructure is split into two main parts: a `bootstrap` (for backend state resources) and the main `terraform` deployment (for the app infrastructure).
   - The S3 bucket and DynamoDB table for Terraform state are managed in a dedicated `infrastructure/bootstrap` folder, following best practices for separation of concerns.

2. **Terraform and CI/CD**
   - Terraform code for both bootstrap and main infrastructure uses the latest AWS provider resources, avoiding deprecated blocks (e.g., using `aws_s3_bucket_versioning` and `aws_s3_bucket_server_side_encryption_configuration`).
   - The backend for both bootstrap and main deployments is configured to use S3 and DynamoDB for remote state and locking.
   - The `.gitignore` is set to exclude all Terraform state files and `.terraform/` directories, ensuring no state is committed to version control.

3. **CI/CD Pipeline**
   - The GitHub Actions workflow (`deploy.yml`) is set up to lint both the main and bootstrap Terraform code using `terraform fmt` and `tflint`.
   - A commented-out job for `terraform plan` is included, ready for future activation.
   - The workflow is designed for consistency in job naming and extensibility.

4. **IAM Role for GitHub Actions**
   - Guidance was provided for creating an AWS IAM role with a trust policy for GitHub Actions OIDC, enabling secure, automated deployments from CI/CD.

5. **Best Practices**
   - All state is managed remotely; no state files are pushed to Git.
   - The bootstrap folder is used for initial state infrastructure, and its state can also be migrated to remote S3/DynamoDB after first apply.
   - The project uses up-to-date Terraform AWS provider resources and follows modern IaC best practices.

### What the Rest of the Project Might Need

1. **Application Infrastructure**
   - Complete the main Terraform code to deploy all required AWS resources for the application (e.g., Lambda functions, API Gateway, DynamoDB tables for app data, IAM roles, etc.).
   - Ensure the S3 bucket for static site hosting is properly configured and integrated with Route53 for the subdomain.

2. **CI/CD Enhancements**
   - Enable and test the `terraform plan` and `terraform apply` jobs in GitHub Actions.
   - Add deployment steps for the frontend (uploading static files to S3) and backend (deploying Lambda code).
   - Integrate OIDC role assumption in the workflow for secure AWS access.

3. **Security and Compliance**
   - Refine IAM policies for least privilege.
   - Add monitoring, logging, and alerting (e.g., CloudWatch, SNS).

4. **Documentation**
   - Expand the usage guide and architecture docs as the infrastructure evolves.
   - Document the CI/CD process and any manual steps required for bootstrapping or recovery.

5. **Testing and Validation**
   - Add automated tests for infrastructure (e.g., using `terratest` or similar tools).
   - Validate deployments in a non-production environment before production rollout.

---

Honestly, quite a bit, I'll need to think more about how the entire flow will look, as well as future flows I might want to create.

Also I'm thinking about the AAA stuff too, that's deffo a use case for later, a simple pin check isn't really satisfactory for me.


